<%- include("../partials/head", { title }) %>

<section class="form-section">
  <h1>Add Agent</h1>
  <p>Create a new agent account. The account will remain <strong>Pending</strong> until admin approval.</p>
  <form method="POST" action="/agent/agents/new" class="form-grid">
    <label>
      Full Name
      <input name="fullName" type="text" required />
    </label>
    <label>
      Email
      <input name="email" type="email" required />
    </label>
    <label>
      Temporary Password
      <div class="password-input-wrapper">
        <input name="password" type="password" id="passwordInput" required />
        <button type="button" class="password-toggle" onclick="togglePassword()" aria-label="Toggle password visibility">
          <span id="eyeIcon">ğŸ‘ï¸</span>
        </button>
      </div>
    </label>
    <label>
      Phone Number
      <input name="phoneNumber" type="text" required />
    </label>
    <label class="full-width">
      City / Region
      <input name="region" type="text" required />
    </label>
    <button type="submit" class="btn primary">Create Agent</button>
  </form>
</section>

<style>
.password-input-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}
.password-input-wrapper input {
  flex: 1;
  padding-right: 40px;
}
.password-toggle {
  position: absolute;
  right: 10px;
  background: none;
  border: none;
  cursor: pointer;
  font-size: 1.1rem;
  padding: 4px;
  color: #666;
}
.password-toggle:hover {
  color: #333;
}
</style>

<script>
function togglePassword() {
  const passwordInput = document.getElementById('passwordInput');
  const eyeIcon = document.getElementById('eyeIcon');
  if (passwordInput.type === 'password') {
    passwordInput.type = 'text';
    eyeIcon.textContent = 'ğŸ™ˆ';
  } else {
    passwordInput.type = 'password';
    eyeIcon.textContent = 'ğŸ‘ï¸';
  }
}
</script>

<%- include("../partials/footer") %>
