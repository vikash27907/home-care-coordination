<%- include("../partials/head", { title }) %>

<section class="form-section narrow">
  <h1>Nurse Signup Application</h1>
  <p>Your profile will be created with <strong>Pending</strong> status until verification is complete.</p>
  <form method="POST" action="/nurse-signup" class="form-grid" id="nurseSignupForm">
    <label>
      Full Name <span class="required-indicator" title="Required"></span>
      <input name="fullName" type="text" required />
    </label>
    
    <label>
      Email <span class="required-indicator" title="Required"></span>
      <input name="email" type="email" required />
    </label>
    
    <label>
      Phone Number <span class="required-indicator" title="Required"></span>
      <input 
        name="phoneNumber" 
        type="tel" 
        maxlength="10" 
        pattern="[6-9][0-9]{9}"
        placeholder="10-digit mobile number"
        required 
        title="Enter 10-digit Indian mobile number starting with 6, 7, 8, or 9"
      />
    </label>
    
    <label>
      City <span class="required-indicator" title="Required"></span>
      <input name="city" type="text" required />
    </label>
    
    <label>
      Gender <span class="required-indicator" title="Required"></span>
      <select name="gender" required>
        <option value="">Select Gender</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
      </select>
    </label>

    <label>
      Current Status <span class="required-indicator" title="Required"></span>
      <select name="current_status" required>
        <option value="">Select Current Status</option>
        <option value="Available for Work">Available for Work</option>
        <option value="Currently Working">Currently Working</option>
        <option value="Open to Opportunities">Open to Opportunities</option>
        <option value="Not Available">Not Available</option>
      </select>
    </label>
    
    <!-- Password Field with Show Toggle -->
    <label class="full-width">
      Password <span class="required-indicator" title="Required"></span>
      <div class="password-field-wrapper">
        <input 
          name="password" 
          type="password" 
          id="passwordInput"
          minlength="8" 
          required
          placeholder="Minimum 8 characters"
        />
        <button type="button" class="password-toggle" onclick="togglePassword()" aria-label="Show password">
          üëÅ
        </button>
      </div>
      <small class="helper-text">Minimum 8 characters required</small>
    </label>

    <button type="submit" class="btn primary full-width btn-submit" id="submitBtn">
      <span class="btn-text">Submit Application</span>
      <span class="spinner" style="display: none;"></span>
    </button>
  </form>
  
  <div class="hint">
    <p><strong>Note:</strong> After signup, you can complete your profile with additional details like skills, experience, education certificates, and resume from your dashboard.</p>
    <p>Profile completion: <strong>40%</strong> (Basic details)</p>
  </div>
</section>

<script>
  // Password toggle functionality
  function togglePassword() {
    const passwordInput = document.getElementById('passwordInput');
    const toggleBtn = document.querySelector('.password-toggle');
    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      toggleBtn.textContent = 'üôà';
    } else {
      passwordInput.type = 'password';
      toggleBtn.textContent = 'üëÅ';
    }
  }
  
  // Form submission with loading state
  document.getElementById('nurseSignupForm').addEventListener('submit', function(e) {
    const submitBtn = document.getElementById('submitBtn');
    const passwordInput = document.getElementById('passwordInput');
    
    // Validate password minimum length
    if (passwordInput.value.length < 8) {
      e.preventDefault();
      alert('Password must be at least 8 characters');
      return;
    }
    
    // Show loading state
    submitBtn.classList.add('loading');
    submitBtn.querySelector('.btn-text').textContent = 'Submitting...';
    submitBtn.querySelector('.spinner').style.display = 'inline-block';
    submitBtn.disabled = true;
  });
</script>

<%- include("../partials/footer") %>
